**摘要**&emsp;2021年2月，我参与了某市智慧城市平台项目的研发，该项目的主要目的是经过各种渠道获取该市各种突发事件和各部门数据；通过对事件的紧急处理和数据分析产生决策并下发指令以提高办公效率。在此项目中我担任系统分析师。本文以该系统为例，主要论述了信息系统开发方法在该系统中的具体应用，通过用户访谈、问卷调查、联合开发会议等方式获取用户需求，以完成系统的规划和分析；在构建阶段，通过分析系统包含的对象、对象的属性及对象的关联来产生初始对象模型，以构造初始原型；在迭代阶段通过和公务职员交流，在完善需求的基础上完善对象模型，以构造出最终系统，通过以上技术使得项目顺利上线，获得用户一致好评。
**项目背景**&emsp;随着互联网的崛起，某市响应政府的号召，为了解决该城市中突发事件汇报不及时、上呈下达效率慢时间长、流程繁琐以及该市建设中存在不合理的隐匿问题以便更好的为市民服务；参考国外智能化城市建设的优势，决定分发起智慧城市的项目。2021年2月，我所在的单位承接了某市智慧城市平台项目的开发与设计，我在项目中担任系统分析师岗位，团队由1名架构师，1名分析师以及开发测试共20名成员组成，历时10个月，于当年12月正式上线，得到市领导好评。该项目的主要目的是经过各种渠道获取该市各种事件信息（安保事故、消防事故、交通事故、地震、洪涝灾害等突发事件）和数据（主要是政府各职能部门如林业局，公安局，消防大队各个部门以及具体设涉及高铁、机场、水库、公交、红绿灯、监控摄像等相关设备的数据）；通过对事件的紧急处理和数据分析产生决策并下发指令并监督执行过程以提高政府办公速度，更快速、更高效的解决突发事件。对于这种复杂的大型项目，要想高质量的完成该系统，选择一种合适的开发方法至关重要。
**技术过渡**&emsp;目前常用的开发方法有四种，包括结构化方法、原型法、面向对象法、面向服务法。结构化方法把整个系统的开发过程分为若干阶段，然后一步一步的依次进行，前一阶段是后一阶段的工作依据。该方法较注重开发过程的整体性和全局性，理论基础严密，但开发周期长，但开发周期长，文档、设计说明繁琐，工作效率低且不能很好的应对变化。原型法与结构化方法不同，原型法的核心在于先快速开发一个原型系统，然后通过反复修改来实现用户的最终系统需求。该方法适于用户需求开始时定义不清、管理决策方法结构化程度不够高的系统开发，更易被用户接受。面向对象方法强调从现实世界中客观存在的事物(对象)出发来认识问题，使系统开发者大大减少了对问题域的理解难度，从而使系统能更准确的反映问题域；改善了人员之间的交流和协作，对软件复用提供强有力的支持。面向服务法在按照领域等方式对业务进行划分，形成了构件即服务的概念，对于构件间的RPC调用，则采用接口方式暴露出来，将接口的定义与实现解耦，可以很好保证单一职责，有效的提升扩展性和可伸缩的能力并有效的利用分布式提升系统性能。
**正文论述**&emsp;结合上述分析，我们最终决定采用快速原型法、面向对象及面向服务法结合的应用开发方案。该方案将软件生命周期分为4个阶段：需求阶段、构建阶段、迭代阶段和验收阶段；本文着重从前3个阶段来展开论述。
&emsp;1、需求阶段
&emsp;选取阶段的目标设计完成系统的规划和分析。由于该系统涉及到的职能部门和业务领域很多，用户需求很难一次性收集完整，再加上各个职能部门业务流程繁琐导致部门职能人员对该部门整体流程不是特别明确。用用户访谈、问卷调查的方式取得了用户的基本需求，在此基础上利用UML工具ROSE设计出系统基本用例图，明确系统大概范围，勾勒出大概边界。系统的整体架构我们决定采用B/S、C/S混合方式，服务端采用领域驱动针对微服务进行设计，因为对于不同职能部门的业务不仅要集成现有的系统(B/S)还要开发公务员通用的APP(C/S)；而不同职能部门的现有系统使用的技术都不相同，为了更方便的使用统一接口与指挥中心交互以及应用集成采用了支持以异构的微服务风格。又因为每个部门的后期需求迭代频繁，为了更好的进行功能扩展，减少后期的人力成本，采用了领域驱动设计(DDD)来保证职责单一性。
&emsp;2、构建阶段
&emsp;构建阶段的目标是构造初始原型与领域建模。在基本调查的基础上，尽量完整的分析现该系统包含的对象、对象的属性及对象的关联，产生一个初始对象模型，再由对象产生系统数据结构的初始框架，对对象活动、驱动这些活动的事件以及对象在这些事件驱动下的前后状态变化进行分析，进而产生系统的用户界面，得到系统的一个最初始原型，这个原型只是一个系统框架，很多操作是空动作，目的是向用户说明系统的功能和操作方法，以后随着开发进程和需求明确再逐步求精。如最核心的指挥调度中心前期只开发对接各职能部门的紧急类型的事件及重要的业务流程，对设备的监控数据暂不考虑接入。除了原型以后，我们采用领域驱动DDD的战略设计进行子域的划分以及子域的领域建模，将需求按领域划分按照单一职责的原则进行划分，使需求功能更清晰，职责更单一；对子域的领域建模采用头脑风暴的方式对子域的需求进行细化，确定限界上下文内的代码边界(划分聚合)，为后面的迭代演化提供打下了坚实的基础。在构建初始原型以及领域建模的过程中，我们邀请了市政府各部门的领导、领域专家以及来自一线的工作人员进行讨论研究。他们为我构建的领域模型提供了工作流程、业务领域方面不可或缺的经验，也为以后模型通过评审提供了有力的支持。
&emsp;3、迭代阶段
&emsp;迭代阶段的目标是通过反复循环最终建造出系统。在每一次迭代过程中，通过和各部门领域的专家交流，在完善需求的基础上，完善对象模型。同时，在完善需求交互的基础上进一步明确用户界面间的关系，通过交互完成功能模型，并验证它的正确性。每一次迭代开发都是一个小项目，对要求的用户进行分析、设计、编码、测试和集成。完成一次迭代后向用户展示，并完成系统测试，对于新的需求可以迁移到下一次的迭代中去开发。每一次迭代工程都要进行领域模型的调整并利用面向对象的技术来实现，而且都必须是增量式的：增加功能，修改缺陷；在这一阶段中，面向对象技术的易维护性和易扩充性、便于复用的优点得到充分体现。在迭代过程中，交通局的专家向我们提出一个需求 "在出现严重交通事故后应最先由市政府中心直接下达指令，调度指定人员进行处理"，但又担心与交通局的指挥冲突造成人员管理混乱的问题。为完成这一需求，通过用户访谈和联合开发会议的方式确定了指定调度中心事件类型对应指定方式关联的设定配置，灵活应对不同事件以及不同等级对应的处理方式，进行领域确定以及聚合功能的设计，完成这一迭代需求。
**总结与感言**&emsp;通过快速原型法与面向对象以及领域驱动的服务方法，使系统在较短的时间内交付使用。迭代过程中各部门领域专家积极参与，间接减少了系统测试和上线培训时间，经过大半年的设计开发，最终成上线，交付给用户一个高质量、高可靠性、高扩展性和高可用性的系统，也得到了了用户的一致好评。但是整个过程也不是一帆风顺，在开发过程中由于小部分开发人员对领域驱动设计不是很熟悉，导致中间工期延迟一小段时间，后来通过组内技术分享讨论，完善技术文档，加快了后面的开发速度，才使项目顺利迭代，最终成功上线。后期，我们通过复盘找出导致问题的原因，指定规范，以规避对应的问题。
&emsp;实践证明，领域驱动服务方法和原型方法以及面向对象开发方法的组合使用是一种应对复杂项目较成功的开发方法，今后需要研究的是如何制定领域驱动设计的规范，使开发人员更快理解并快速融入开发，以更快的开发出更高质量的项目。

<!--stackedit_data:
eyJoaXN0b3J5IjpbMTUzNTMxODc2OV19
-->